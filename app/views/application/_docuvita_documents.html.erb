<%# Params:
    - documents: collection of Docuvita documents
    - title: section title (optional)
%>

<% if documents.any? %>
  <div class="mb-3">

    <div class="d-flex flex-wrap gap-2">
      <% documents.each do |document| %>
        <div style="width: 120px;">
          <%= link_to view_docuvita_document_path(document), target: "_blank", class: "text-decoration-none" do %>
            <div class="text-center">
              <% if document.document_type.include?('pdf') || document.document_type.include?('image') %>
                <i class="bi bi-file-pdf text-danger" style="font-size: 2rem;"></i>
              <% else %>
                <i class="bi bi-file-earmark text-secondary" style="font-size: 2rem;"></i>
              <% end %>
              <div class="small text-dark text-truncate mt-1" title="<%= document.filename %>">
                <%= document.filename %>
              </div>
              <% if document.respond_to?(:qr_position) && document.qr_position.present? %>
                <div class="text-muted small">
                  <%= t('.qr_position') %>: <br>
                  <%= t('common.labels.' + document.qr_position) %>
                </div>
              <% end %>
              <div class="text-muted" style="font-size: 0.7rem;">
                <%= document.created_at.strftime("%Y-%m-%d") %>
              </div>
            </div>
          <% end %>
          <% if current_user.can_delete?("Isometry") %>
            <div class="text-center mt-1">
              <%= button_tag type: 'button',
                           class: 'btn btn-outline-danger btn-sm',
                           data: {
                             bs_toggle: "modal",
                             bs_target: "#deleteDocumentModal",
                             "document-id": document.id,
                             "document-name": document.filename,
                             "document-number": document.docuvita_object_id
                           } do %>
                <i class="bi bi-trash"></i> <%= t('.delete') %>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
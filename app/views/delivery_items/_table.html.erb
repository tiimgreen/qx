<div class="table-responsive">
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th><%= t('activerecord.attributes.delivery_item.tag_number') %></th>
        <th><%= t('activerecord.attributes.delivery_item.batch_number') %></th>
        <th><%= t('activerecord.attributes.delivery_item.quantity_received') %></th>
        <th><%= t('activerecord.attributes.delivery_item.item_description') %></th>
        <th><%= t('activerecord.attributes.delivery_item.specifications') %></th>
        <th><%= t('delivery_items.show.quality_inspections') %></th>
        <th><%= t('delivery_items.show.ra_measurement') %></th>
        <th class="text-end"><%= t('common.labels.actions') %></th>
      </tr>
    </thead>

    <tbody>
      <% delivery_items.each do |item| %>
        <tr>
          <td><%= item.tag_number %></td>
          <td><%= item.batch_number %></td>
          <td><%= item.quantity_received %></td>
          <td><%= item.item_description %></td>
          <td>
            <% if item.specifications.present? %>
              <dl class="row">
                <% item.specifications.each do |key, value| %>
                  <dd class="col-sm-8"><%= value %></dd>
                <% end %>
              </dl>
            <% end %>
          </td>
          <td>
            <% if item.quality_inspections.any? %>
              (<%= item.quality_inspections.where(status: 'passed').count %> passed)
            <% end %>
          </td>
          <td>
            <% if item.roughness_measurement %>
              <%= number_with_precision(item.roughness_measurement.measured_value, precision: 2) %>
            <% end %>
          </td>
          <td class="text-end">
            <div class="btn-group btn-group-sm">
              <%= link_to delivery_item_path(item),
                         class: 'btn btn-outline-info m-1',
                         title: t('delivery_items.buttons.view'),
                         data: { bs_toggle: 'tooltip' } do %>
                <i class="bi bi-eye"></i>
              <% end %>

              <%= link_to edit_delivery_item_path(item),
                         class: 'btn btn-outline-primary m-1',
                         title: t('delivery_items.buttons.edit'),
                         data: { bs_toggle: 'tooltip' } do %>
                <i class="bi bi-pencil"></i>
              <% end %>

              <%= button_to delivery_item_path(item),
                         method: :delete,
                         class: 'btn btn-outline-danger m-1',
                         title: t('delivery_items.buttons.delete'),
                         form: { style: 'display: inline' },
                         data: { confirm: t('common.messages.confirm_delete', model: DeliveryItem.model_name.human.downcase),
                                 bs_toggle: 'tooltip' } do %>
                <i class="bi bi-trash"></i>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>



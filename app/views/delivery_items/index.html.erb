<div class="container mt-4">
  <%= render 'breadcrumb', breadcrumbs: [
    { text: @project.name, path: project_path(@project) },
    { text: t('navigation.menu.incoming_deliveries.deliveries'),
      path: project_incoming_deliveries_path(@project) },
    { text: @incoming_delivery.order_number,
      path: project_incoming_delivery_path(@project, @incoming_delivery) },
    { text: t('delivery_items.index.title') }
  ] %>

  <div class="row mb-4">
    <div class="col-md-8">
      <%= form_tag project_incoming_delivery_delivery_items_path(@incoming_delivery.project, @incoming_delivery), method: :get do %>
        <div class="input-group">
          <%= text_field_tag :search, params[:search],
                            class: 'form-control',
                            placeholder: t('common.labels.search_placeholder') %>
          <div class="input-group-append">
            <%= submit_tag t('common.labels.search_button'), class: 'btn btn-outline-secondary m-1' %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-md-4 text-end">
      <%= link_to new_project_incoming_delivery_delivery_item_path(@incoming_delivery.project, @incoming_delivery),
                  class: 'btn btn-primary' do %>
        <i class="bi bi-plus"></i> <%= t('delivery_items.buttons.new_item') %>
      <% end %>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-hover table-sm">
      <thead>
        <tr>
          <th><%= t('activerecord.attributes.delivery_item.tag_number') %></th>
          <th><%= t('activerecord.attributes.delivery_item.batch_number') %></th>
          <th><%= t('activerecord.attributes.delivery_item.description') %></th>
          <th><%= t('activerecord.attributes.delivery_item.quantity_received') %></th>
          <th><%= t('activerecord.attributes.delivery_item.specifications') %></th>
          <th class="text-end"><%= t('common.labels.actions') %></th>
        </tr>
      </thead>

      <tbody>
        <% @delivery_items.each do |item| %>
          <tr>
            <td><%= item.tag_number %></td>
            <td><%= item.batch_number %></td>
            <td><%= item.item_description %></td>
            <td><%= item.quantity_received %></td>
            <td><%= item.specifications %></td>
            <td class="text-end">
              <div class="btn-group btn-group-sm">
                <%= link_to delivery_item_path(item),
                           class: 'btn btn-outline-info m-1',
                           title: t('delivery_items.buttons.view'),
                           data: { bs_toggle: 'tooltip' } do %>
                  <i class="bi bi-eye"></i>
                <% end %>

                <%= link_to edit_delivery_item_path(item),
                           class: 'btn btn-outline-primary m-1',
                           title: t('delivery_items.buttons.edit'),
                           data: { bs_toggle: 'tooltip' } do %>
                  <i class="bi bi-pencil"></i>
                <% end %>

                <%= button_to delivery_item_path(item),
                           method: :delete,
                           class: 'btn btn-outline-danger m-1',
                           title: t('delivery_items.buttons.delete'),
                           form: { style: 'display: inline' },
                           data: {
                             turbo_confirm: t('common.messages.confirm_delete', model: DeliveryItem.model_name.human.downcase),
                             bs_toggle: 'tooltip'
                           } do %>
                  <i class="bi bi-trash"></i>
                <% end %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
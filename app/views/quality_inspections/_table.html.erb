<div class="table-responsive">
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th><%= t('activerecord.models.project') %></th>
        <th><%= t('activerecord.attributes.incoming_delivery.order_number') %></th>
        <th><%= t('activerecord.attributes.delivery_item.tag_number') %></th>
        <th><%= t('activerecord.attributes.delivery_item.batch_number') %></th>
        <th><%= t('.date') %></th>
        <th><%= t('.type') %></th>
        <th><%= t('.inspector') %></th>
        <th><%= t('.status') %></th>
        <th><%= t('.defects') %></th>
        <th class="text-end"><%= t('.actions') %></th>
      </tr>
    </thead>

    <tbody>
      <% inspections.each do |inspection| %>
        <tr>
          <td><%= link_to inspection.delivery_item.incoming_delivery.project.name, project_path(inspection.delivery_item.incoming_delivery.project) %></td>
          <td><%= link_to inspection.delivery_item.incoming_delivery.order_number, project_incoming_delivery_path(inspection.delivery_item.incoming_delivery.project, inspection.delivery_item.incoming_delivery) %></td>
          <td><%= link_to inspection.delivery_item.tag_number, delivery_item_path(inspection.delivery_item) %></td>
          <td><%= inspection.delivery_item.batch_number %></td>
          <td><%= inspection.inspection_date.strftime("%Y-%m-%d %H:%M") %></td>
          <td><%= inspection.inspection_type.titleize %></td>
          <td><%= inspection.inspector.name %></td>
          <td>
            <span class="badge <%= inspection.status == 'passed' ? 'bg-success' : 'bg-danger' %>">
              <%= inspection.status.upcase %>
            </span>
          </td>
          <td><%= t('.defects_found', count: inspection.inspection_defects.count) %></td>
          <td class="text-end">
            <div class="btn-group btn-group-sm">
              <%= link_to quality_inspection_path(inspection),
                         class: 'btn btn-outline-info m-1',
                         title: t('quality_inspections.buttons.view'),
                         data: { bs_toggle: 'tooltip' } do %>
                <i class="bi bi-eye"></i>
              <% end %>

              <%= link_to edit_quality_inspection_path(inspection),
                         class: 'btn btn-outline-primary m-1',
                         title: t('quality_inspections.buttons.edit'),
                         data: { bs_toggle: 'tooltip' } do %>
                <i class="bi bi-pencil"></i>
              <% end %>

              <%= button_to quality_inspection_path(inspection),
                         method: :delete,
                         class: 'btn btn-outline-danger m-1',
                         title: t('quality_inspections.buttons.delete'),
                         form: { style: 'display: inline' },
                         data: {
                           confirm: t('.confirm_delete'),
                           bs_toggle: 'tooltip'
                         } do %>
                <i class="bi bi-trash"></i>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

